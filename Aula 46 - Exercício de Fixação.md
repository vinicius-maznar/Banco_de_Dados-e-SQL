# 🔨 **EXERCÍCIO DE FIXAÇÃO**

- **TAREFA 1:** CRIE UMA DB CHAMADA `OFICINA` E CONECTE-SE AO BANCO;

- **TAREFA 2:** O SR. JOSÉ DESEJAM CADASTRAR OS CARROS QUE, ENTRAM EM SUA OFICINA, PARA UTILIZAR DOS SEUS SERVIÇOS.
	
	- CADA CLIENTE POSSUI APENAS UM CARRO - (`CLIENTE`	(1,1)  `CARRO`);

	- CADA MODELO DE CARRO POSSUI UMA MARCA - (`MARCA`  (1,N)  `MODELO`);

	- É NECESSÁRIO INFORMAR AS CORES DOS CARROS, CASO HAJA A NECESSIDADE DE ADQUIRÍ-LA PARA ALGUMA EVENTUAL PINTURA. O CARRO PODE TER MAIS DE UMA COR - (`CARRO`  (1,N)  `CARRO_COR`  (N,1)  `COR`);

	- É NECESSÁRIO ARMAZENAR OS TELEFONES DOS CLIENTES, MAS NÃO QUER QUE SEJAM OBRIGATÓRIOS. (`TELEFONE`  (1,N)  `CLIENTE`)

## **PASSO 1:** CRIANDO E SE CONECTANDO A DB `OFICINA`;
```SQL
/*INPUT*/
CREATE DATABASE ;

USE OFICINA;

/*OUTPUT*/
mysql> CREATE DATABASE OFICINA;
Query OK, 1 row affected (0.01 sec)

mysql> USE OFICINA;
Database changed
```

## **PASSO 2:** CRIANDO AS TABELAS `CARRO`, `CLIENTE`, `COR`, `TELEFONE`, `MODELO`, `MARCA`;
```SQL
/*INPUT*/
CREATE TABLE CLIENTE(
	IDCLIENTE INT PRIMARY KEY AUTO_INCREMENT,
	NOME VARCHAR(30) NOT NULL,
	SEXO ENUM('M','F') NOT NULL,
	ID_CARRO INT UNIQUE
);

CREATE TABLE TELEFONE(
	IDTELEFONE INT PRIMARY KEY AUTO_INCREMENT,
	TIPO ENUM('CEL','RES','COM') NOT NULL,
	NUMERO VARCHAR(30) NOT NULL,
	ID_CLIENTE INT 
);

CREATE TABLE MARCA(
	IDMARCA INT PRIMARY KEY AUTO_INCREMENT,
	MARCA VARCHAR(30) UNIQUE
);

CREATE TABLE CARRO(
	IDCARRO INT PRIMARY KEY AUTO_INCREMENT,
	MODELO VARCHAR(30) NOT NULL,
	PLACA VARCHAR(30) NOT NULL UNIQUE,
	ID_MARCA INT
);

CREATE TABLE COR(
	IDCOR INT PRIMARY KEY AUTO_INCREMENT,
	COR VARCHAR(30) UNIQUE
);

CREATE TABLE CARRO_COR(
	ID_CARRO INT,
	ID_COR INT,
	PRIMARY KEY(ID_CARRO,ID_COR)
);

/*OUTPUT*/
mysql> CREATE TABLE CLIENTE(
    -> IDCLIENTE INT PRIMARY KEY AUTO_INCREMENT,
    -> NOME VARCHAR(30) NOT NULL,
    -> SEXO ENUM('M','F') NOT NULL,
    -> ID_CARRO INT UNIQUE
    -> );
Query OK, 0 rows affected (0.01 sec)

mysql>
mysql> CREATE TABLE TELEFONE(
    -> IDTELEFONE INT PRIMARY KEY AUTO_INCREMENT,
    -> TIPO ENUM('CEL','RES','COM') NOT NULL,
    -> NUMERO VARCHAR(30) NOT NULL,
    -> ID_CLIENTE INT
    -> );
Query OK, 0 rows affected (0.03 sec)

mysql>
mysql> CREATE TABLE MARCA(
    -> IDMARCA INT PRIMARY KEY AUTO_INCREMENT,
    -> MARCA VARCHAR(30) UNIQUE
    -> );
Query OK, 0 rows affected (0.00 sec)

mysql>
mysql> CREATE TABLE CARRO(
    -> IDCARRO INT PRIMARY KEY AUTO_INCREMENT,
    -> MODELO VARCHAR(30) NOT NULL,
    -> PLACA VARCHAR(30) NOT NULL UNIQUE,
    -> ID_MARCA INT
    -> );
Query OK, 0 rows affected (0.02 sec)

mysql>
mysql> CREATE TABLE COR(
    -> IDCOR INT PRIMARY KEY AUTO_INCREMENT,
    -> COR VARCHAR(30) UNIQUE
    -> );
Query OK, 0 rows affected (0.00 sec)

mysql>
mysql> CREATE TABLE CARRO_COR(
    -> ID_CARRO INT,
    -> ID_COR INT,
    -> PRIMARY KEY(ID_CARRO,ID_COR)
    -> );
Query OK, 0 rows affected (0.03 sec)
```

## **PASSO 3:** ADICIONANDO AS `CONSTRAINTS`;
```SQL
/*INPUT*/
ALTER TABLE TELEFONE 
ADD CONSTRAINT FK_TELEFONE_CLIENTE
FOREIGN KEY(ID_CLIENTE)
REFERENCES CLIENTE(IDCLIENTE);


ALTER TABLE CLIENTE
ADD CONSTRAINT FK_CLIENTE_CARRO
FOREIGN KEY(ID_CARRO)
REFERENCES CARRO(IDCARRO);


ALTER TABLE CARRO
ADD CONSTRAINT FK_CARRO_MARCA
FOREIGN KEY(ID_MARCA)
REFERENCES MARCA(IDMARCA);


ALTER TABLE CARRO_COR
ADD CONSTRAINT FK_COR
FOREIGN KEY(ID_COR)
REFERENCES COR(IDCOR);


ALTER TABLE CARRO_COR
ADD CONSTRAINT FK_CARRO
FOREIGN KEY(ID_CARRO)
REFERENCES CARRO(IDCARRO);

/*OUTPUT*/
mysql> ALTER TABLE TELEFONE
    -> ADD CONSTRAINT FK_TELEFONE_CLIENTE
    -> FOREIGN KEY(ID_CLIENTE)
    -> REFERENCES CLIENTE(IDCLIENTE);
Query OK, 0 rows affected (0.05 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql>
mysql>
mysql> ALTER TABLE CLIENTE
    -> ADD CONSTRAINT FK_CLIENTE_CARRO
    -> FOREIGN KEY(ID_CARRO)
    -> REFERENCES CARRO(IDCARRO);
Query OK, 0 rows affected (0.03 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql>
mysql>
mysql> ALTER TABLE CARRO
    -> ADD CONSTRAINT FK_CARRO_MARCA
    -> FOREIGN KEY(ID_MARCA)
    -> REFERENCES MARCA(IDMARCA);
Query OK, 0 rows affected (0.03 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql>
mysql>
mysql> ALTER TABLE CARRO_COR
    -> ADD CONSTRAINT FK_COR
    -> FOREIGN KEY(ID_COR)
    -> REFERENCES COR(IDCOR);
Query OK, 0 rows affected (0.03 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql>
mysql>
mysql> ALTER TABLE CARRO_COR
    -> ADD CONSTRAINT FK_CARRO
    -> FOREIGN KEY(ID_CARRO)
    -> REFERENCES CARRO(IDCARRO);
Query OK, 0 rows affected (0.01 sec)
Records: 0  Duplicates: 0  Warnings: 0
```